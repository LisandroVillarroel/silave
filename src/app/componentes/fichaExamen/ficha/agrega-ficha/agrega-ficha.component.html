<h2 mat-dialog-title>INGRESO FICHA EXÁMEN</h2>
<mat-dialog-content [formGroup]="agregaFicha" name="agregaFicha" class="agrega-container">

  <div class="row align-items-center ">
    <div class="col-md-12">
      <mat-form-field>
        <mat-select [formControl]="idCliente" placeholder="Seleccione Cliente" (selectionChange)="seleccionaCliente($event.value)" required>
          <mat-option *ngFor="let _cliente of datoCliente" [value]="_cliente">
            {{_cliente.nombreFantasia}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="idCliente.invalid">{{getErrorMessage('idCliente')}}</mat-error>
      </mat-form-field>
    </div>
  </div>

  <mat-divider class="mt-3 mb-3"></mat-divider>


    <div class="row align-items-center ">
      <div class="col-md-6 ">
        <mat-form-field>
          <input matInput placeholder="Ingrese Propietario" [formControl]="nombrePropietario" required>
          <mat-error *ngIf="nombrePropietario.invalid">{{getErrorMessage('nombrePropietario')}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-6">
        <mat-form-field>
          <input matInput placeholder="Ingrese Paciente" [formControl]="nombrePaciente" required>
          <mat-error *ngIf="nombrePaciente.invalid">{{getErrorMessage('nombrePaciente')}}</mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="row align-items-center">
      <div class="col-md-4">
        <mat-form-field>
          <input matInput placeholder="Ingrese Edad" [formControl]="edad" required>
          <mat-error *ngIf="edad.invalid">{{getErrorMessage('edad')}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4 ">
        <mat-form-field>
          <mat-select [formControl]="idEspecie" placeholder="Seleccione Especie" required>
            <mat-option *ngFor="let _especie of datoEspecie" [value]="_especie">
              {{_especie.nombre}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="idEspecie.invalid">{{getErrorMessage('idEspecie')}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4 ">
        <mat-form-field>
          <mat-select [formControl]="idRaza" placeholder="Seleccione Raza" required>
            <mat-option *ngFor="let _raza of datoRaza" [value]="_raza">
              {{_raza.nombre}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="idRaza.invalid">{{getErrorMessage('idRaza')}}</mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="row align-items-center">
      <div class="col-md-4 ">
        <mat-form-field>
          <mat-select [formControl]="sexo" placeholder="Seleccione Sexo" required>
            <mat-option *ngFor="let _sexo of datoSexo" [value]="_sexo.id">
              {{_sexo.nombre}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="sexo.invalid">{{getErrorMessage('sexo')}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-8">
        <mat-form-field>
          <mat-select [formControl]="idDoctorSolicitante" placeholder="Seleccione Dr. Solicitante" required>
            <mat-option *ngFor="let _doctorSolicitante of datoDoctorSolicitante" [value]="_doctorSolicitante">
              {{_doctorSolicitante.nombre}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="idDoctorSolicitante.invalid">{{getErrorMessage('idDoctorSolicitante')}}</mat-error>
        </mat-form-field>
      </div>

    </div>

    <section class="example-section">
      <h4>Seleccione Exámenes</h4>
      <!--Hemograma-->
      <div class="row" >
        <div class="col-3 alineaVertical">
          <mat-checkbox [formControl]="hemograma" (change)="chkHemograma($event.checked)">Hemograma</mat-checkbox>
        </div>
        <div class="col-4" *ngIf="visibleHemograma">
          <mat-form-field>
            <mat-select [formControl]="idUsuarioHemograma" placeholder="Seleccione Usuario Hemograma">
              <mat-option *ngFor="let _usuario of datoUsuario" [value]="_usuario">
                {{_usuario.apellidoPaterno + ' ' + _usuario.apellidoMaterno + _usuario.nombres}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="idUsuarioHemograma.invalid">{{getErrorMessage('idUsuario')}}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <!--Examen1-->
      <div class="row">
        <div class="col-3 alineaVertical">
          <mat-checkbox [formControl]="examen1" (change)="chkExamen1($event.checked)">Examen1</mat-checkbox>
        </div>
        <div class="col-4" *ngIf="visibleExamen1">
          <mat-form-field>
            <mat-select [formControl]="idUsuarioExamen1" placeholder="Seleccione Usuario Examen1" >
              <mat-option *ngFor="let _usuario of datoUsuario" [value]="_usuario">
                {{_usuario.apellidoPaterno + ' ' + _usuario.apellidoMaterno + _usuario.nombres}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="idUsuarioExamen1.invalid">{{getErrorMessage('idUsuarioExamen1')}}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <!--Examen2-->
      <div class="row">
        <div class="col-3">
          <mat-checkbox [formControl]="examen2" (change)="chkExamen2($event.checked)">Examen2</mat-checkbox>
        </div>
        <div class="col-4" *ngIf="visibleExamen2">
          <mat-form-field>
            <mat-select [formControl]="idUsuarioExamen2" placeholder="Seleccione Usuario Examen2" >
              <mat-option *ngFor="let _usuario of datoUsuario" [value]="_usuario">
                {{_usuario.nombres + ' ' + _usuario.apellidoPaterno + ' ' + _usuario.apellidoMaterno}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="idUsuarioExamen2.invalid">{{getErrorMessage('idUsuarioExamen2')}}</mat-error>
          </mat-form-field>
        </div>
      </div>
    </section>



</mat-dialog-content>


<mat-dialog-actions>
  <div class="col-md-6">
    <button mat-raised-button color="warn" (click)="cerrar()" mat-dialog-close  [disabled]=false>Cerrar</button>
  </div>
  <div class="col-md-6">
    <button class="colorFondoBoton" mat-raised-button  (click)="enviar()"  [disabled]="agregaFicha.invalid">ENVIAR</button>
  </div>
</mat-dialog-actions>




